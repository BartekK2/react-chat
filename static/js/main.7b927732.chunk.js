(this.webpackJsonpsocialapp=this.webpackJsonpsocialapp||[]).push([[0],{143:function(e,t,n){},157:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(52),i=n.n(r),s=(n(143),n(5)),j=n(0),o=n.n(j),u=n(4),b=n(17),l=n(24),d=n(49),O=n(204),h=n(205),x=n(206),p=n(197),f=n(208),g=n(209),m=n(199),v=n(200),w=n(83),y=n(113),k=n(27),S=Object(y.a)({apiKey:"AIzaSyD7rk9gUZhOxVAI_M60nqDcDxkpoObftdM",authDomain:"test-36302.firebaseapp.com",projectId:"test-36302",storageBucket:"test-36302.appspot.com",messagingSenderId:"537914014889",appId:"1:537914014889:web:efd2bd04f2eb48a262bdb8"}),C=Object(k.g)(S),I=Object(w.c)(S),z=n(2),R=new k.c,T=new k.a,U=(new k.b,a.a.createContext());function P(){return Object(c.useContext)(U)}function E(e){var t=e.children,n=Object(c.useState)(),a=Object(b.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(!0),j=Object(b.a)(s,2),o=j[0],u=j[1];Object(c.useEffect)((function(){return Object(k.h)(C,(function(e){i(e),u(!1)}))}),[]);var l={currentUser:r,login:function(e,t){return Object(k.k)(C,e,t)},signup:function(e,t){return Object(k.f)(C,e,t)},logout:function(){return Object(k.n)(C)},resetPassword:function(e){return Object(k.i)(C,e)},updateUserEmail:function(e){return Object(k.o)(r,e)},updateUserPassword:function(e){return Object(k.p)(r,e)},setAuthPersistence:function(e){e?Object(k.j)(C,k.d):Object(k.j)(C,k.e)},getPersistence:function(){return C.persistenceManager.persistence.type},googleSignInWithPopUp:function(){Object(k.l)(C,R)},googleSignInWithRedirect:function(){Object(k.m)(C,R)},facebookSignInWithPopUp:function(){Object(k.l)(C,T)},facebookSignInWithRedirect:function(){Object(k.m)(C,T)}};return Object(z.jsx)(U.Provider,{value:l,children:!o&&t})}var D=n(116),F=n.n(D),H=n(117),W=n.n(H),A=n(118),L=n.n(A);var M=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(b.a)(r,2),s=i[0],j=i[1],w=P(),y=w.login,k=w.currentUser,S=w.setAuthPersistence,C=w.getPersistence,I=w.googleSignInWithRedirect,R=w.facebookSignInWithPopUp,T=Object(c.useState)(""),U=Object(b.a)(T,2),E=U[0],D=U[1],H=Object(c.useState)(!1),A=Object(b.a)(H,2),M=A[0],Z=A[1],B=Object(c.useState)(!1),N=Object(b.a)(B,2),q=N[0],J=N[1],$=Object(c.useRef)("");function G(){return(G=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,D(""),Z(!0),S($.current.checked),e.next=7,y(n,s);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),D({"auth/wrong-password":"Z\u0142e has\u0142o","auth/user-not-found":"U\u017cytkownik nie istnieje"}[e.t0.code]);case 12:Z(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){J(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(n))}),[n]),Object(z.jsxs)(z.Fragment,{children:[k&&Object(z.jsx)(l.a,{to:"/"}),Object(z.jsxs)(O.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{minWidth:"100vw",minHeight:"100vh"},children:[Object(z.jsx)(O.a,{item:!0,children:Object(z.jsxs)(h.a,{variant:"text",children:[Object(z.jsx)(x.a,{onClick:I,children:Object(z.jsx)(F.a,{})}),Object(z.jsx)(x.a,{onClick:R,children:Object(z.jsx)(W.a,{})}),Object(z.jsx)(x.a,{children:Object(z.jsx)(L.a,{})})]})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(p.a,{error:q,onChange:function(e){return a(e.target.value)},label:"Email",variant:"outlined",helperText:q&&"To nie wygl\u0105da jak email"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(p.a,{error:s.length<8,onChange:function(e){return j(e.target.value)},type:"password",label:"Has\u0142o",variant:"outlined",helperText:s.length<8&&"Has\u0142o musi by\u0107 d\u0142u\u017csze"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(x.a,{variant:"contained",disabled:M||q||s.length<8,onClick:function(e){return G.apply(this,arguments)},children:"Zaloguj"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(f.a,{children:Object(z.jsx)(g.a,{control:Object(z.jsx)(m.a,{inputRef:$,defaultChecked:"LOCAL"===C()}),label:"Pami\u0119taj mnie"})})}),Object(z.jsx)(O.a,{item:!0,children:E&&Object(z.jsx)(v.a,{variant:"outlined",sx:{width:"100%"},severity:"error",children:E})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(d.b,{to:"/signup",style:{textDecoration:"none",color:"inherit","&:hover":{textDecoration:"underline"}},children:"Nie masz konta? Zarejestruj sie"})})]})]})},Z=n(3),B=n(43),N=n(13),q=n(14),J=n(70);var $=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(b.a)(r,2),s=i[0],j=i[1],h=Object(c.useState)(""),w=Object(b.a)(h,2),y=w[0],k=w[1],S=P(),C=S.signup,I=S.currentUser,R=Object(c.useState)(""),T=Object(b.a)(R,2),U=T[0],E=T[1],D=Object(c.useState)(!1),F=Object(b.a)(D,2),H=F[0],W=F[1],A=Object(c.useState)(!0),L=Object(b.a)(A,2),M=L[0],$=L[1],G=Object(c.useRef)(""),K=function(e){Object(N.a)(n,e);var t=Object(q.a)(n);function n(){var e,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Co\u015b z\u0142ego sie sta\u0142o";Object(Z.a)(this,n);for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(Object(B.a)(e),n),e.code=c,e}return n}(Object(J.a)(Error));function Q(){return(Q=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,E(""),W(!0),G.current.checked){e.next=6;break}throw new K("Nie zgodzi\u0142e\u015b sie na regulamin");case 6:if(s==y){e.next=8;break}throw new K("Has\u0142a sie nie zgadzaj\u0105");case 8:return e.next=10,C(n,s);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),E(e.t0.code);case 15:W(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){$(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(n))}),[n]),Object(z.jsxs)(z.Fragment,{children:[I&&Object(z.jsx)(l.a,{to:"/"}),Object(z.jsxs)(O.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{minWidth:"100vw",minHeight:"100vh"},children:[Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(p.a,{error:M,onChange:function(e){return a(e.target.value)},label:"Email",variant:"outlined",helperText:M&&"To nie wygl\u0105da jak email"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(p.a,{error:s.length<8,onChange:function(e){return j(e.target.value)},type:"password",label:"Has\u0142o",variant:"outlined",helperText:s.length<8&&"Has\u0142o musi by\u0107 d\u0142u\u017csze"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(p.a,{error:y.length<8,onChange:function(e){return k(e.target.value)},type:"password",label:"Powt\xf3rz has\u0142o",variant:"outlined",helperText:y.length<8&&"Has\u0142o musi by\u0107 d\u0142u\u017csze"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(x.a,{variant:"contained",disabled:H||M||s.length<8,onClick:function(e){return Q.apply(this,arguments)},children:"Zarejestrujs"})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(f.a,{children:Object(z.jsx)(g.a,{control:Object(z.jsx)(m.a,{inputRef:G}),label:"Zgadzam sie na regulamin"})})}),U&&Object(z.jsx)(v.a,{severity:"error",children:U}),Object(z.jsxs)(O.a,{item:!0,children:["Masz ju\u017c konto? ",Object(z.jsx)(d.b,{to:"/login",children:"Zaloguj sie"})]})]})]})},G=n(213),K=n(214),Q=n(211),V=n(210),Y=n(201),_=n(120),X=n.n(_),ee=n(53),te=n(212),ne=n(63),ce=n(119);var ae=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(""),i=P().currentUser,s=Object(ce.useMediaQuery)({query:"(max-width: 800px)"});function j(e){return l.apply(this,arguments)}function l(){return l=Object(u.a)(o.a.mark((function e(t){var n,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:r.current.value,t.preventDefault(),e.next=4,Object(ee.a)(Object(ee.b)(I,"messages"),{text:n,uid:i.uid,createdAt:Object(ee.f)(),username:i.displayName,photoURL:i.photoURL,email:i.email});case 4:r.current.value="",document.getElementById("chat").scrollTop=document.getElementById("chat").scrollHeight;case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}Object(c.useEffect)((function(){Object(ee.c)(Object(ee.e)(Object(ee.b)(I,"messages"),Object(ee.d)("createdAt")),(function(e){a(e.docs.map((function(e){return e.data()})))}))}),[]);var d=function(e){var t=e.id,n=e.message;return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)(te.a,{style:{marginTop:"20px",marginRight:"10px",marginLeft:n.uid==i.uid?"auto":"10px",width:"40vh"},children:[Object(z.jsx)("span",{style:{fontSize:"15px"},children:n.username||n.email}),Object(z.jsx)(te.a,{style:{background:n.uid==i.uid?ne.a[400]:"#ddd",padding:"10px",borderRadius:"20px"},children:n.text},t)]})})};return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{id:"chat",style:{display:"flex",flexDirection:"column",height:"70vh",overflowY:"auto"},children:n.map((function(e,t){return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(d,{id:t,message:e})})}))}),Object(z.jsxs)("div",{style:{display:"flex",width:s?"100%":"60%",marginLeft:"auto",marginRight:"auto",justifyContent:"space-evenly",marginTop:"30px"},children:[Object(z.jsx)(p.a,{inputRef:r}),Object(z.jsx)(x.a,{variant:"contained",onClick:function(e){return j(e)},children:"Wy\u015blij"}),Object(z.jsx)(x.a,{variant:"contained",onClick:function(e){return j(e,"\ud83d\udc97")},sx:{borderRadius:"100%",padding:"auto",fontSize:"20px"},children:"\ud83d\udc97"})]})]})},re=n(123),ie=n.n(re),se=n(122),je=n.n(se),oe=n(121),ue=n.n(oe);var be=function(){var e=P(),t=e.logout;return e.currentUser,Object(z.jsxs)("div",{children:[Object(z.jsx)(G.a,{position:"static",children:Object(z.jsxs)(K.a,{children:[Object(z.jsx)(Q.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(z.jsx)(X.a,{})}),Object(z.jsx)(V.a,{variant:"h6",component:"div",sx:{display:{xs:"none",sm:"block"}},children:"Messenger"}),Object(z.jsxs)(O.a,{container:!0,spacing:2,justifyContent:"flex-end",sx:{flexGrow:2},children:[Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(Q.a,{color:"inherit",children:Object(z.jsx)(Y.a,{badgeContent:4,color:"error",children:Object(z.jsx)(ue.a,{})})})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(Q.a,{color:"inherit",children:Object(z.jsx)(je.a,{})})}),Object(z.jsx)(O.a,{item:!0,children:Object(z.jsx)(Q.a,{onClick:t,color:"inherit",children:Object(z.jsx)(ie.a,{})})})]})]})}),Object(z.jsx)(ae,{})]})},le=function(){return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{children:"404 - Not Found!"}),Object(z.jsx)(l.a,{to:"/"})]})},de=n(196),Oe=n(92),he=n(124),xe=["component"];function pe(e){var t=e.component,n=Object(he.a)(e,xe),c=P().currentUser;return Object(z.jsx)(l.b,Object(Oe.a)(Object(Oe.a)({},n),{},{render:function(e){return c?Object(z.jsx)(t,Object(Oe.a)({},e)):Object(z.jsx)(l.a,{to:"/login"})}}))}var fe=n(125),ge=n(203),me=Object(fe.a)({palette:{primary:{main:ne.a[500],contrastText:"#fff"},secondary:{main:ne.a[300]}},components:{MuiOutlinedInput:{styleOverrides:{root:{borderRadius:"15px"},notchedOutline:{borderColor:ne.a[400]}}}}});function ve(e){var t=e.children;return Object(z.jsx)(ge.a,{theme:me,children:t})}var we=function(){var e,t;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(de.a,{}),Object(z.jsx)(d.a,{basename:"/react-chat",children:Object(z.jsx)(ve,{children:Object(z.jsx)(E,{children:Object(z.jsxs)(l.d,{children:[Object(z.jsx)(pe,(e={exact:!0,path:"/"},Object(s.a)(e,"exact",!0),Object(s.a)(e,"component",be),e)),Object(z.jsx)(pe,(t={exact:!0,path:"/react-chat"},Object(s.a)(t,"exact",!0),Object(s.a)(t,"component",be),t)),Object(z.jsx)(l.b,{exact:!0,path:"/signup",component:$}),Object(z.jsx)(l.b,{exact:!0,path:"/login",component:M}),Object(z.jsx)(l.b,{exact:!0,path:"/react-chat/login",component:M}),Object(z.jsx)(l.b,{exact:!0,path:"/react-chat/react-chat/login",component:M}),Object(z.jsx)(l.b,{component:le})]})})})})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,215)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(we,{})}),document.getElementById("root")),ye()}},[[157,1,2]]]);
//# sourceMappingURL=main.7b927732.chunk.js.map