(this.webpackJsonpsocialapp=this.webpackJsonpsocialapp||[]).push([[0],{144:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(54),i=n.n(r),s=(n(144),n(3)),o=n(0),j=n.n(o),u=n(4),l=n(16),b=n(23),d=n(51),h=n(206),O=n(207),p=n(208),x=n(199),f=n(210),m=n(211),g=n(202),v=n(201),w=n(84),k=n(117),y=n(27),S=Object(k.a)({apiKey:"AIzaSyD7rk9gUZhOxVAI_M60nqDcDxkpoObftdM",authDomain:"test-36302.firebaseapp.com",projectId:"test-36302",storageBucket:"test-36302.appspot.com",messagingSenderId:"537914014889",appId:"1:537914014889:web:efd2bd04f2eb48a262bdb8"}),C=Object(y.g)(S),I=Object(w.e)(S),z=n(40),R=n(2),M=new y.c,P=new y.a,T=(new y.b,a.a.createContext());function U(){return Object(c.useContext)(T)}function E(e){var t=e.children,n=Object(c.useState)(),a=Object(l.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(!0),o=Object(l.a)(s,2),b=o[0],d=o[1];var h=Object(c.useState)(!1),O=Object(l.a)(h,2),p=O[0],x=O[1],f=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r){e.next=7;break}return e.next=3,Object(z.d)(Object(z.c)(I,"users",r.email));case 3:t=e.sent,console.log(r),x(t.exists()),console.log(p);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return Object(y.h)(C,(function(e){i(e),d(!1)}))}),[]),Object(c.useEffect)((function(){f()}));var m={currentUser:r,login:function(e,t){return Object(y.k)(C,e,t)},signup:function(e,t){return Object(y.f)(C,e,t)},logout:function(){return Object(y.n)(C)},resetPassword:function(e){return Object(y.i)(C,e)},updateUserEmail:function(e){return Object(y.o)(r,e)},exists:p,updateUserPassword:function(e){return Object(y.p)(r,e)},setAuthPersistence:function(e){e?Object(y.j)(C,y.d):Object(y.j)(C,y.e)},getPersistence:function(){return C.persistenceManager.persistence.type},googleSignInWithPopUp:function(){Object(y.l)(C,M)},googleSignInWithRedirect:function(){Object(y.m)(C,M)},facebookSignInWithPopUp:function(){Object(y.l)(C,P)},facebookSignInWithRedirect:function(){Object(y.m)(C,P)}};return Object(R.jsx)(T.Provider,{value:m,children:!b&&t})}var F=n(120),A=n.n(F),D=n(121),W=n.n(D),H=n(122),L=n.n(H);var Z=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),s=i[0],o=i[1],w=U(),k=w.login,y=w.currentUser,S=w.setAuthPersistence,C=w.getPersistence,I=w.googleSignInWithRedirect,z=w.facebookSignInWithPopUp,M=Object(c.useState)(""),P=Object(l.a)(M,2),T=P[0],E=P[1],F=Object(c.useState)(!1),D=Object(l.a)(F,2),H=D[0],Z=D[1],q=Object(c.useState)(!1),B=Object(l.a)(q,2),N=B[0],J=B[1],_=Object(c.useRef)("");function X(){return(X=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,E(""),Z(!0),S(_.current.checked),e.next=7,k(n,s);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),E({"auth/wrong-password":"Z\u0142e has\u0142o","auth/user-not-found":"U\u017cytkownik nie istnieje"}[e.t0.code]);case 12:Z(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){J(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(n))}),[n]),Object(R.jsxs)(R.Fragment,{children:[y&&Object(R.jsx)(b.a,{to:"/"}),Object(R.jsxs)(h.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{minWidth:"100vw",minHeight:"100vh"},children:[Object(R.jsx)(h.a,{item:!0,children:Object(R.jsxs)(O.a,{variant:"text",children:[Object(R.jsx)(p.a,{onClick:I,children:Object(R.jsx)(A.a,{})}),Object(R.jsx)(p.a,{onClick:z,children:Object(R.jsx)(W.a,{})}),Object(R.jsx)(p.a,{children:Object(R.jsx)(L.a,{})})]})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{error:N,onChange:function(e){return a(e.target.value)},label:"Email",variant:"outlined",helperText:N&&"To nie wygl\u0105da jak email"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{error:s.length<8,onChange:function(e){return o(e.target.value)},type:"password",label:"Has\u0142o",variant:"outlined",helperText:s.length<8&&"Has\u0142o musi by\u0107 d\u0142u\u017csze"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(p.a,{variant:"contained",disabled:H||N||s.length<8,onClick:function(e){return X.apply(this,arguments)},children:"Zaloguj"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(f.a,{children:Object(R.jsx)(m.a,{control:Object(R.jsx)(g.a,{inputRef:_,defaultChecked:"LOCAL"===C()}),label:"Pami\u0119taj mnie"})})}),Object(R.jsx)(h.a,{item:!0,children:T&&Object(R.jsx)(v.a,{variant:"outlined",sx:{width:"100%"},severity:"error",children:T})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(d.b,{to:"/signup",style:{textDecoration:"none",color:"inherit","&:hover":{textDecoration:"underline"}},children:"Nie masz konta? Zarejestruj sie"})})]})]})},q=n(5),B=n(44),N=n(13),J=n(14),_=n(72);var X=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),s=i[0],o=i[1],O=Object(c.useState)(""),w=Object(l.a)(O,2),k=w[0],y=w[1],S=U(),C=S.signup,I=S.currentUser,z=Object(c.useState)(""),M=Object(l.a)(z,2),P=M[0],T=M[1],E=Object(c.useState)(!1),F=Object(l.a)(E,2),A=F[0],D=F[1],W=Object(c.useState)(!0),H=Object(l.a)(W,2),L=H[0],Z=H[1],X=Object(c.useRef)(""),$=function(e){Object(N.a)(n,e);var t=Object(J.a)(n);function n(){var e,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Co\u015b z\u0142ego sie sta\u0142o";Object(q.a)(this,n);for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(Object(B.a)(e),n),e.code=c,e}return n}(Object(_.a)(Error));function G(){return(G=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,T(""),D(!0),X.current.checked){e.next=6;break}throw new $("Nie zgodzi\u0142e\u015b sie na regulamin");case 6:if(s==k){e.next=8;break}throw new $("Has\u0142a sie nie zgadzaj\u0105");case 8:return e.next=10,C(n,s);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),T(e.t0.code);case 15:D(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){Z(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(n))}),[n]),Object(R.jsxs)(R.Fragment,{children:[I&&Object(R.jsx)(b.a,{to:"/"}),Object(R.jsxs)(h.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{minWidth:"100vw",minHeight:"100vh"},children:[Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{error:L,onChange:function(e){return a(e.target.value)},label:"Email",required:!0,variant:"outlined",helperText:L&&"To nie wygl\u0105da jak email"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{error:s.length<8,onChange:function(e){return o(e.target.value)},type:"password",label:"Has\u0142o",required:!0,variant:"outlined",helperText:s.length<8&&"Has\u0142o musi by\u0107 d\u0142u\u017csze"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{error:k.length<8,onChange:function(e){return y(e.target.value)},type:"password",label:"Powt\xf3rz has\u0142o",required:!0,variant:"outlined",helperText:k.length<8&&"Has\u0142o musi by\u0107 d\u0142u\u017csze"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(p.a,{variant:"contained",disabled:A||L||s.length<8,onClick:function(e){return G.apply(this,arguments)},children:"Zarejestruj si\u0119"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(f.a,{children:Object(R.jsx)(m.a,{control:Object(R.jsx)(g.a,{inputRef:X}),label:"Zgadzam sie na regulamin"})})}),P&&Object(R.jsx)(v.a,{severity:"error",children:P}),Object(R.jsxs)(h.a,{item:!0,children:["Masz ju\u017c konto? ",Object(R.jsx)(d.b,{to:"/login",children:"Zaloguj sie"})]})]})]})},$=n(215),G=n(216),K=n(213),Q=n(212),V=n(203),Y=n(124),ee=n.n(Y),te=n(214),ne=n(65),ce=n(123);var ae=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(""),i=U().currentUser,s=Object(ce.useMediaQuery)({query:"(max-width: 800px)"});function o(e){return b.apply(this,arguments)}function b(){return b=Object(u.a)(j.a.mark((function e(t){var n,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:r.current.value,t.preventDefault(),e.next=4,Object(z.a)(Object(z.b)(I,"messages"),{text:n,uid:i.uid,createdAt:Object(z.h)(),username:i.displayName,photoURL:i.photoURL,email:i.email});case 4:r.current.value="",document.getElementById("chat").scrollTop=document.getElementById("chat").scrollHeight;case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}Object(c.useEffect)((function(){Object(z.e)(Object(z.g)(Object(z.b)(I,"messages"),Object(z.f)("createdAt")),(function(e){a(e.docs.map((function(e){return e.data()})))}))}),[]);var d=function(e){var t=e.id,n=e.message;return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(te.a,{style:{marginTop:"20px",marginRight:"10px",marginLeft:n.uid==i.uid?"auto":"10px",maxWidth:"40vh"},children:[Object(R.jsxs)("span",{style:{fontSize:"15px"},children:[n.username||n.email," "]}),Object(R.jsx)("span",{children:n.createdAt&&new Date(1e3*n.createdAt.seconds).toJSON().slice(11,19).replace(/-/g,"/")}),Object(R.jsx)(te.a,{style:{overflowWrap:"break-word",padding:"10px",borderRadius:"20px",background:n.uid==i.uid?ne.a[400]:"#ddd"},children:n.text},t)]})})};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("div",{id:"chat",style:{display:"flex",flexDirection:"column",height:"70vh",overflowY:"auto"},children:n.map((function(e,t){return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(d,{id:t,message:e})})}))}),Object(R.jsxs)("div",{style:{display:"flex",width:s?"100%":"60%",marginLeft:"auto",marginRight:"auto",justifyContent:"space-evenly",marginTop:"30px"},children:[Object(R.jsx)(x.a,{inputRef:r}),Object(R.jsx)(p.a,{variant:"contained",onClick:function(e){return o(e)},children:"Wy\u015blij"}),Object(R.jsx)(p.a,{variant:"contained",onClick:function(e){return o(e,"\ud83d\udc97")},sx:{borderRadius:"100%",padding:"auto",fontSize:"20px"},children:"\ud83d\udc97"})]})]})},re=n(127),ie=n.n(re),se=n(126),oe=n.n(se),je=n(125),ue=n.n(je);var le=function(){var e=U(),t=e.logout,n=(e.currentUser,e.exists);return Object(R.jsxs)("div",{children:[n||Object(R.jsx)(b.a,{to:"/info"}),Object(R.jsx)($.a,{position:"static",children:Object(R.jsxs)(G.a,{children:[Object(R.jsx)(K.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(R.jsx)(ee.a,{})}),Object(R.jsx)(Q.a,{variant:"h6",component:"div",sx:{display:{xs:"none",sm:"block"}},children:"Messenger"}),Object(R.jsxs)(h.a,{container:!0,spacing:2,justifyContent:"flex-end",sx:{flexGrow:2},children:[Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(K.a,{color:"inherit",children:Object(R.jsx)(V.a,{badgeContent:4,color:"error",children:Object(R.jsx)(ue.a,{})})})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(K.a,{color:"inherit",children:Object(R.jsx)(oe.a,{})})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(K.a,{onClick:t,color:"inherit",children:Object(R.jsx)(ie.a,{})})})]})]})}),Object(R.jsx)(ae,{})]})},be=function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"404 - Not Found!"}),Object(R.jsx)(b.a,{to:"/"})]})},de=n(198),he=n(47),Oe=n(92),pe=["component"];function xe(e){var t=e.component,n=Object(Oe.a)(e,pe),c=U().currentUser;return Object(R.jsx)(b.b,Object(he.a)(Object(he.a)({},n),{},{render:function(e){return c?Object(R.jsx)(t,Object(he.a)({},e)):Object(R.jsx)(b.a,{to:"/login"})}}))}var fe=n(128),me=n(205),ge=Object(fe.a)({palette:{primary:{main:ne.a[500],contrastText:"#fff"},secondary:{main:ne.a[300]}},components:{MuiOutlinedInput:{styleOverrides:{root:{borderRadius:"15px"},notchedOutline:{borderColor:ne.a[400]}}}}});function ve(e){var t=e.children;return Object(R.jsx)(me.a,{theme:ge,children:t})}var we=n(217),ke=n(9),ye=["theme"],Se=Object(ke.a)(we.a)((function(e){var t=e.theme,n=Object(Oe.a)(e,ye);return{width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(calc(100% - 6px))","& .MuiSwitch-thumb:before":{backgroundImage:n.firstIcon,backgroundSize:"20px 20px"},"& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:(t.palette.mode,t.palette.primary.main),width:32,height:32,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:n.secondIcon,backgroundSize:"20px 20px"}},"& .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#8796A5":"#aab4be",borderRadius:"30px"}}}));var Ce=function(){var e=U(),t=e.currentUser,n=e.exists,a=Object(c.useReducer)((function(e,t){switch(t.type){case"wiek":return Object(he.a)(Object(he.a)({},e),{},{wiek:t.value});case"info":return Object(he.a)(Object(he.a)({},e),{},{info:t.value});case"plec":return Object(he.a)(Object(he.a)({},e),{},{plec:t.value});default:throw new Error}}),{wiek:0,info:"",plec:"F"}),r=Object(l.a)(a,2),i=r[0],s=r[1],o=Object(c.useState)(""),d=Object(l.a)(o,2),O=d[0],g=d[1],w=function(){var e=Object(u.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("wiek: ".concat(i.wiek," info: ").concat(i.info," plec: ").concat(i.plec)),e.prev=2,e.next=5,Object(z.i)(Object(z.c)(I,"users",t.email),{wiek:i.wiek,info:i.info,plec:i.plec});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),g(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsxs)(R.Fragment,{children:[n&&Object(R.jsx)(b.a,{to:"/"}),Object(R.jsxs)(h.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{minWidth:"100vw",minHeight:"100vh"},children:[Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{onChange:function(e){return s({type:"info",value:e.target.value})},label:"Informacje",variant:"outlined",helperText:"Informacje widoczne w twoim profilu"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(x.a,{onChange:function(e){return s({type:"wiek",value:e.target.value})},label:"Wiek",error:i.wiek<15,variant:"outlined",helperText:i.wiek<15&&"Musisz mie\u0107 sko\u0144czone 15 lat"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(f.a,{children:Object(R.jsx)(m.a,{control:Object(R.jsx)(Se,{required:!0,onChange:function(e){return s({type:"plec",value:e.target.checked?"M":"F"})},firstIcon:"url(https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/twitter/282/boy_1f466.png)",secondIcon:"url(https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/120/twitter/282/girl_1f467.png)"}),label:"P\u0142e\u0107",labelPlacement:"top"})})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(p.a,{variant:"contained",onClick:w,children:"Akceptuj"})}),Object(R.jsx)(h.a,{item:!0,children:Object(R.jsx)(v.a,{severity:"info",children:"Mo\u017cesz pomin\u0105\u0107 pola nie wymagane i ustawi\u0107 je p\xf3\u017aniej w swoim profilu"})}),O&&Object(R.jsx)(v.a,{severity:"error",children:O.code})]})]})};var Ie=function(){var e,t;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(de.a,{}),Object(R.jsx)(d.a,{basename:"/react-chat",children:Object(R.jsx)(ve,{children:Object(R.jsx)(E,{children:Object(R.jsxs)(b.d,{children:[Object(R.jsx)(xe,(e={exact:!0,path:"/"},Object(s.a)(e,"exact",!0),Object(s.a)(e,"component",le),e)),Object(R.jsx)(xe,(t={exact:!0,path:"/react-chat"},Object(s.a)(t,"exact",!0),Object(s.a)(t,"component",le),t)),Object(R.jsx)(b.b,{exact:!0,path:"/signup",component:X}),Object(R.jsx)(b.b,{exact:!0,path:"/login",component:Z}),Object(R.jsx)(b.b,{exact:!0,path:"/react-chat/login",component:Z}),Object(R.jsx)(b.b,{exact:!0,path:"/react-chat/react-chat/login",component:Z}),Object(R.jsx)(b.b,{exact:!0,path:"/signup",component:X}),Object(R.jsx)(b.b,{exact:!0,path:"/info",component:Ce}),Object(R.jsx)(b.b,{component:be})]})})})})]})},ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(Ie,{})}),document.getElementById("root")),ze()}},[[158,1,2]]]);
//# sourceMappingURL=main.902487a8.chunk.js.map